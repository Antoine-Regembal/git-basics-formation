# Exercise 5

## Exercise statement

You want to write a new verse for your poem.

- Modify the poem to add these lines at the end of the file:

```txt
Roses are red
  Violets are blue,
Without you
  My life is poo.
```

- Commit and push the changes with a meaningful commit name of your choice,
  - ðŸ’¡ It adds new verses, enhancing the initial poem: it's a `feat` commit.

Ho crap! You just noticed another error in the poem!
It's not about `Honey` but about `Sugar`.

How can we do to change the git history so that it looks like it was perfect on
the first place ?

Here we cannot use the `amend` technique because it only adds changes to the
last commit.

This is where the `fixup` technique comes handy.

- Check git history and find the initial poem commit `sha` (the commit ID),
- Use `git commit --fixup` to fix the initial poem commit and replace `Honey`
with `Sugar`:
```bash
  git commit --fixup=XXXXX

  # replace XXXXX with the commit SHA you want to fix.
  # run `git commit --help` and read the fixup section if you want more
  # information
```
- Check the commit history again: now we have a new commit prefixed with
`fixup!`. This commit purpose is to fix the initial commit that was targeted.
But we don't want to keep things like this has it makes the git history dirty.
- Use the `interactive rebase` technique to squash the `fixup` commit into the
initial commit:
```bash
  git rebase -i HEAD~X --autosquash

  # Replace X with the number of commits you want to rewind, for example if the
  # initial commit you want to fix is placed 10 commits higher (including the
  # fixup commit), then replace X by 10.

  # The `-i` flag makes the rebase interactive.

  # The `--autosquash` flag will automatically place the `fixup` commit above
  # the targeted commit in the git history and apply a squash modification.
```
- Once the rebase is finished, check the git history: now the history is clean.
The fixup commit has been integrated to the initial poem commit.
- Push the modifications to the remote branch (`main`).

## Useful links

- https://git-scm.com/docs/git-commit#Documentation/git-commit.txt---fixupamendrewordcommit
- https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---interactive

## Tips

Here is an excellent article (in French ðŸ‡«ðŸ‡·) on how to keep your git history
clean.

- https://medium.com/just-tech-it-now/git-commit-fixup-corriger-editer-un-commit-simplement-dd6c7d9026cd

Here is a useful `VSCODE` extension to help you handle interactive rebase with a
nice graphical interface: https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens
